## Prompt Calibration Ideas

- This can be thought of a way to optimize prompts for open source models.
- We can have a base prompt and response coming from an x-model (Ex: Gemma3, Mistral, Llama3)
- Their response would go through a human validation/feedback which would consist of rating on a numerical scale along with natural language feedback.
- This can be fed as input to proprietary model y-model (Ex: GPT-4o, Gemini) superior to the open source model which would calibrate the prompt.
- For each response generated by the LLM, there will be multiple fields:</br>
    a) Rating System between (1-5) Where value towards 1 tends to a bad response and value towards 5 tends to a good response.</br>
    b) There will also be a textbox, where the user can give feedback to the generated response.</br>
- Based on the feedback, received from the user the second LLM will auto finetune the system prompt.
- This can be thought of Prompt finetuning mechanism as opposed to LLM Response finetuning.
- If there are any tool calls, the LLM response can be evaluated after the tool call.

### Main Endpoints:

- `/chat/session/{session_id}/send` => This is the chat API.
- `/chat/{chat_id}/feedback` => This endpoint can give the feedback to y-model to calibrate 

### Tables Needed:
- `User` => Table to maintain Users
- `Session` => Table to maintain chat sessions
- `Chat` => This table will store all the messages for each session from the user.
- `Prompt` => This table will store all the prompts

### Table Structure:

User: id, name, email, password
Session: id, user_id , session_name, current_prompt, model_name
Chat: id, session_id, user_message, assistant_message, model_used, rating, feedback, action
Prompt: id, base_prompt, current_prompt, calibrated_prompts

### Steps to run:

- Ensure ollama is installed in local. Incase the model you want to test isn't present it will be pulled automatically
- `git clone https://github.com/circuit-geek/prompt-calibration.git`
- `cd prompt-calibration`
- `uv sync`
- `uv run uvicorn src.main:app --reload`
- The APIs can be tested in Postman/Bruno/Swagger Docs
